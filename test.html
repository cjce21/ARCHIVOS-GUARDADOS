<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LabReport: Protocolo Cient√≠fico</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üß¨</text></svg>">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Roboto+Slab:wght@400;700&display=swap" rel="stylesheet">

    <style>
        body { 
            font-family: 'Inter', sans-serif;
            overscroll-behavior-y: none;
            background-color: #0f172a; 
        }
        
        .font-academic {
            font-family: 'Roboto Slab', serif;
        }

        /* Optimizaciones */
        * { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }

        .gpu-accelerated {
            transform: translateZ(0);
            backface-visibility: hidden;
            will-change: transform, opacity;
        }
        
        /* Animaciones */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fadeIn { animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
        
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-8px); } 100% { transform: translateY(0px); } }
        .animate-float { animation: float 4s ease-in-out infinite; }

        @keyframes spinSlow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .animate-spin-slow { animation: spinSlow 8s linear infinite; }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="text-white select-none overflow-hidden h-screen w-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- BASE DE DATOS MEJORADA (Con Trampas y Niveles) ---
        // Patr√≥n roto: Las correctas ya no son siempre las m√°s largas.
        // Trampas: Respuestas largas y t√©cnicas que no proponen un experimento.
        const studentsDB = [
            {
                id: 1, student: "Andrea", topic: "Fuerza y Movimiento", icon: "üöó",
                attempts: [
                    [ // Intento 1
                        { id: "A", text: "Considerando que la f√≠sica estudia las interacciones fundamentales del universo, analizar√© te√≥ricamente c√≥mo los objetos se desplazan en el espacio y el tiempo.", type: "incorrect", feedback: "Suena muy inteligente, pero es pura teor√≠a. No dices qu√© har√°s con el carrito." },
                        { id: "B", text: "Variar√© la masa del carrito para medir su efecto en la distancia recorrida tras un empuje constante.", type: "correct", feedback: "¬°Exacto! Corto, preciso y con variables claras." },
                        { id: "C", text: "Voy a empujar el carrito muy fuerte para ver si puedo romper el r√©cord de velocidad del pasillo.", type: "incorrect", feedback: "El objetivo es medir, no competir ni jugar." }
                    ],
                    [ // Intento 2
                        { id: "A", text: "Aplicar√© una fuerza constante sobre el m√≥vil din√°mico para observar si la alteraci√≥n de la carga neta influye inversamente en la aceleraci√≥n resultante.", type: "correct", feedback: "Lenguaje t√©cnico y correcto. Plantea una relaci√≥n causa-efecto." },
                        { id: "B", text: "El movimiento rectil√≠neo uniforme es aquel cuya velocidad es constante, por lo que el carrito deber√≠a moverse siempre igual si no lo toco.", type: "incorrect", feedback: "Esto es una definici√≥n de libro de texto, no una propuesta experimental." },
                        { id: "C", text: "Ver√© si el carrito va r√°pido.", type: "incorrect", feedback: "Demasiado vago. ¬øQu√© es 'r√°pido'? Necesitas medir." }
                    ],
                    [ // Intento 3
                        { id: "A", text: "La Segunda Ley de Newton establece que la fuerza es igual a la masa por la aceleraci√≥n, una f√≥rmula descubierta hace siglos.", type: "incorrect", feedback: "Dato hist√≥rico correcto, pero... ¬ød√≥nde est√° tu experimento?" },
                        { id: "B", text: "Determinar√© la relaci√≥n entre peso y distancia de frenado.", type: "correct", feedback: "Directo al grano. Muy bien." },
                        { id: "C", text: "Pondr√© cosas en el carrito.", type: "incorrect", feedback: "Falta el prop√≥sito. ¬øPara qu√©?" }
                    ]
                ]
            },
            {
                id: 2, student: "Jeycob", topic: "Magnetismo", icon: "üß≤",
                attempts: [
                    [
                        { id: "A", text: "Clasificar√© diversos materiales del aula seg√∫n su interacci√≥n magn√©tica (atracci√≥n o indiferencia) con un im√°n de ferrita.", type: "correct", feedback: "Excelente. Defines materiales, herramienta y criterio de clasificaci√≥n." },
                        { id: "B", text: "El magnetismo es un fen√≥meno f√≠sico por el cual los objetos ejercen fuerzas de atracci√≥n o repulsi√≥n sobre otros materiales espec√≠ficos.", type: "incorrect", feedback: "Definici√≥n de diccionario. No dice qu√© har√°s t√∫ hoy." },
                        { id: "C", text: "Usar√© el im√°n para ver cosas m√°gicas.", type: "incorrect", feedback: "La ciencia busca explicaciones, no magia." }
                    ],
                    [
                        { id: "A", text: "Dado que el campo magn√©tico terrestre orienta las br√∫julas, intentar√© crear un campo similar usando electricidad y metales.", type: "incorrect", feedback: "Interesante, pero se desv√≠a del experimento simple de clasificaci√≥n de materiales." },
                        { id: "B", text: "Determinar√© qu√© objetos son ferromagn√©ticos.", type: "correct", feedback: "Breve y profesional." },
                        { id: "C", text: "Voy a pegar cosas al im√°n.", type: "incorrect", feedback: "Lenguaje demasiado informal." }
                    ],
                    [
                        { id: "A", text: "Los imanes tienen polo norte y polo sur, y los polos opuestos se atraen mientras que los iguales se repelen con fuerza.", type: "incorrect", feedback: "Nuevamente, esto es teor√≠a, no pr√°ctica." },
                        { id: "B", text: "Testear√© la permeabilidad magn√©tica de madera, pl√°stico y hierro.", type: "correct", feedback: "Buen uso de terminolog√≠a t√©cnica aplicada a la pr√°ctica." },
                        { id: "C", text: "Har√© trucos de levitaci√≥n.", type: "incorrect", feedback: "Objetivo l√∫dico, no cient√≠fico." }
                    ]
                ]
            },
            {
                id: 3, student: "Jonatan", topic: "Cambios de Estado", icon: "üßä",
                attempts: [
                    [
                        { id: "A", text: "El agua es la √∫nica sustancia presente naturalmente en los tres estados: s√≥lido, l√≠quido y gaseoso en nuestro planeta.", type: "incorrect", feedback: "Dato curioso verdadero, pero no es una introducci√≥n a un experimento." },
                        { id: "B", text: "Medir√© c√≥mo la adici√≥n de cloruro de sodio (sal) afecta la tasa de fusi√≥n de un cubo de hielo est√°ndar.", type: "correct", feedback: "Perfecto. Identificas la variable (sal) y lo que mides (tasa de fusi√≥n)." },
                        { id: "C", text: "Voy a ver c√≥mo se deshace el hielo porque hace calor.", type: "incorrect", feedback: "Observaci√≥n casual, falta rigor y control de variables." }
                    ],
                    [
                        { id: "A", text: "Comparar√© el tiempo de descongelaci√≥n con y sin sal.", type: "correct", feedback: "Simple, directo y contiene lo esencial: comparaci√≥n y variable." },
                        { id: "B", text: "Realizar√© un an√°lisis termodin√°mico exhaustivo de la transferencia de calor en sistemas acuosos a baja temperatura.", type: "incorrect", feedback: "Suena demasiado complejo y pretencioso para este nivel. S√© claro." },
                        { id: "C", text: "Har√© agua salada fr√≠a.", type: "incorrect", feedback: "Eso es el resultado, no el objetivo de investigaci√≥n." }
                    ],
                    [
                        { id: "A", text: "Observar√© el cambio de fase s√≥lido-l√≠quido bajo diferentes condiciones qu√≠micas.", type: "correct", feedback: "Bien dicho. 'Condiciones qu√≠micas' se refiere a la sal." },
                        { id: "B", text: "El hielo flota porque es menos denso que el agua l√≠quida, una propiedad an√≥mala muy importante para la vida marina.", type: "incorrect", feedback: "Gran explicaci√≥n te√≥rica, cero experimentaci√≥n propuesta." },
                        { id: "C", text: "Pondr√© sal al hielo a ver qu√© pasa.", type: "incorrect", feedback: "Demasiado coloquial ('a ver qu√© pasa')." }
                    ]
                ]
            },
            {
                id: 4, student: "Juan", topic: "Aerodin√°mica", icon: "‚úàÔ∏è",
                attempts: [
                    [
                        { id: "A", text: "Construir√© prototipos con diferentes superficies alares para determinar cu√°l maximiza la distancia de vuelo.", type: "correct", feedback: "Excelente. Relacionas 'superficie alar' (dise√±o) con 'distancia' (resultado)." },
                        { id: "B", text: "La historia de la aviaci√≥n comenz√≥ con los hermanos Wright, quienes dise√±aron el primer aeroplano motorizado controlable.", type: "incorrect", feedback: "Contexto hist√≥rico irrelevante para tu reporte de laboratorio." },
                        { id: "C", text: "Voy a tirar aviones por la ventana.", type: "incorrect", feedback: "Peligroso y carente de m√©todo cient√≠fico." }
                    ],
                    [
                        { id: "A", text: "Analizar√© la aerodin√°mica de los perfiles de papel bas√°ndome en el principio de Bernoulli sobre la presi√≥n del aire.", type: "incorrect", feedback: "Suena muy listo, pero en la pr√°ctica solo vas a tirar aviones, no medir presiones." },
                        { id: "B", text: "Comparar√© el vuelo de un avi√≥n de punta fina vs. uno de punta chata.", type: "correct", feedback: "Concreto y f√°cil de verificar." },
                        { id: "C", text: "Quiero que mi avi√≥n vuele muy alto.", type: "incorrect", feedback: "Deseo personal, no hip√≥tesis comprobable." }
                    ],
                    [
                        { id: "A", text: "Evaluar√© c√≥mo el dise√±o del morro afecta la estabilidad del planeo.", type: "correct", feedback: "Variables claras: dise√±o vs estabilidad." },
                        { id: "B", text: "Los aviones vuelan gracias a las alas y a los motores que los empujan fuerte.", type: "incorrect", feedback: "Explicaci√≥n gen√©rica de funcionamiento." },
                        { id: "C", text: "Haremos una carrera de aviones.", type: "incorrect", feedback: "No es una competencia, es un estudio." }
                    ]
                ]
            },
            {
                id: 5, student: "Maycol", topic: "Germinaci√≥n", icon: "üå±",
                attempts: [
                    [
                        { id: "A", text: "Las plantas son organismos aut√≥trofos que producen su propio alimento mediante la fotos√≠ntesis usando luz solar.", type: "incorrect", feedback: "Definici√≥n de diccionario. No dice qu√© har√°s con los frijoles." },
                        { id: "B", text: "Controlar√© el riego en dos grupos de semillas para cuantificar su impacto en la velocidad de germinaci√≥n.", type: "correct", feedback: "¬°Muy bien! 'Cuantificar impacto' suena profesional y define la acci√≥n." },
                        { id: "C", text: "Voy a plantar cositas.", type: "incorrect", feedback: "Vocabulario infantil. Usa t√©rminos precisos." }
                    ],
                    [
                        { id: "A", text: "Estudiar√© si la ausencia de luz impide el desarrollo inicial de la pl√°ntula.", type: "correct", feedback: "Hip√≥tesis clara y comprobable." },
                        { id: "B", text: "Con el objetivo de preservar la naturaleza, plantar√© un √°rbol para ayudar al medio ambiente del planeta.", type: "incorrect", feedback: "Noble causa, pero es activismo, no un experimento controlado." },
                        { id: "C", text: "Quiero ver crecer una flor.", type: "incorrect", feedback: "Observaci√≥n pasiva, falta intervenci√≥n experimental." }
                    ],
                    [
                        { id: "A", text: "Comparar√© el crecimiento en algod√≥n h√∫medo vs. tierra seca.", type: "correct", feedback: "Comparativa directa y funcional." },
                        { id: "B", text: "El ciclo de vida de las plantas comienza con la semilla y termina con la dispersi√≥n del fruto.", type: "incorrect", feedback: "Resumen te√≥rico del ciclo vital, falta el experimento." },
                        { id: "C", text: "Las plantas beben agua.", type: "incorrect", feedback: "Antropomorfismo (las plantas absorben, no beben) y muy b√°sico." }
                    ]
                ]
            },
            {
                id: 6, student: "M√≠a", topic: "Densidad", icon: "üíß",
                attempts: [
                    [
                        { id: "A", text: "Crear√© una columna de densidad estratificada vertiendo l√≠quidos de distinta masa por unidad de volumen.", type: "correct", feedback: "T√©cnico y preciso. Describe perfectamente el procedimiento." },
                        { id: "B", text: "Es fascinante observar c√≥mo los fluidos newtonianos interact√∫an en un entorno controlado de laboratorio escolar.", type: "incorrect", feedback: "Mucha palabrer√≠a ('relleno') que no dice qu√© l√≠quidos usar√°s ni qu√© har√°s." },
                        { id: "C", text: "Har√© una torre de colores.", type: "incorrect", feedback: "Enfoque est√©tico, no cient√≠fico." }
                    ],
                    [
                        { id: "A", text: "Demostrar√© el principio de flotabilidad relativa usando miel, agua y aceite.", type: "correct", feedback: "Bien. Menciona el principio f√≠sico y los materiales." },
                        { id: "B", text: "El aceite es hidrof√≥bico, lo que significa que repele las mol√©culas de agua debido a su polaridad.", type: "incorrect", feedback: "Explicaci√≥n qu√≠mica correcta del 'por qu√©', pero no presenta el experimento." },
                        { id: "C", text: "Voy a mezclar cosas de la cocina.", type: "incorrect", feedback: "Demasiado informal." }
                    ],
                    [
                        { id: "A", text: "Arqu√≠medes grit√≥ '¬°Eureka!' cuando descubri√≥ la densidad al meterse en su ba√±era en la antigua Grecia.", type: "incorrect", feedback: "An√©cdota hist√≥rica divertida, pero irrelevante para tu reporte." },
                        { id: "B", text: "Ordenar√© l√≠quidos seg√∫n su densidad.", type: "correct", feedback: "Corto y conciso. Suficiente." },
                        { id: "C", text: "Ver√© cu√°l l√≠quido pesa m√°s.", type: "incorrect", feedback: "Confunde peso con densidad. Necesitas ser m√°s preciso." }
                    ]
                ]
            },
            {
                id: 7, student: "Alejandro", topic: "Fotos√≠ntesis", icon: "üåª",
                attempts: [
                    [
                        { id: "A", text: "La clorofila es el pigmento fotorreceptor responsable de la primera etapa de la transformaci√≥n energ√©tica en los tilacoides.", type: "incorrect", feedback: "Parece copiado de Wikipedia. Demuestra conocimiento, pero no es un plan de acci√≥n." },
                        { id: "B", text: "Privar√© a una planta de luz solar para verificar si la producci√≥n de clorofila (color verde) se detiene.", type: "correct", feedback: "Excelente. Acci√≥n (privar luz) -> Observaci√≥n (color verde)." },
                        { id: "C", text: "Voy a tapar una planta.", type: "incorrect", feedback: "Incompleto. ¬øPara qu√©? ¬øQu√© esperas ver?" }
                    ],
                    [
                        { id: "A", text: "Comparar√© el vigor de dos espec√≠menes: uno expuesto a fotoperiodo normal y otro en oscuridad total.", type: "correct", feedback: "Muy buen uso de vocabulario ('espec√≠menes', 'fotoperiodo')." },
                        { id: "B", text: "Es vital cuidar las plantas porque nos dan el ox√≠geno que respiramos todos los d√≠as.", type: "incorrect", feedback: "Valoraci√≥n √©tica/ecol√≥gica, no cient√≠fica." },
                        { id: "C", text: "Ver√© si la planta se pone triste.", type: "incorrect", feedback: "Las plantas se marchitan, no se entristecen." }
                    ],
                    [
                        { id: "A", text: "Investigar√© la etiolog√≠a de la clorosis vegetal.", type: "correct", feedback: "Muy t√©cnico (quiz√°s demasiado), pero aceptable como 'Investigar√© por qu√© amarillean'." },
                        { id: "B", text: "El sol es una estrella de tipo G que emite radiaci√≥n electromagn√©tica esencial para la vida.", type: "incorrect", feedback: "Dato astron√≥mico irrelevante." },
                        { id: "C", text: "Esconder√© la maceta en el armario.", type: "incorrect", feedback: "Suena a travesura." }
                    ]
                ]
            },
            {
                id: 8, student: "Suzette", topic: "√ìptica (Sombras)", icon: "üî¶",
                attempts: [
                    [
                        { id: "A", text: "Establecer√© la correlaci√≥n matem√°tica entre la distancia foco-objeto y el tama√±o de la proyecci√≥n resultante.", type: "correct", feedback: "¬°Wow! Muy sofisticado, pero correcto: mides distancia vs tama√±o." },
                        { id: "B", text: "La luz se propaga en l√≠nea recta a una velocidad de 300,000 km/s en el vac√≠o, lo cual es muy r√°pido.", type: "incorrect", feedback: "Dato f√≠sico te√≥rico. No describe tu experimento con la linterna." },
                        { id: "C", text: "Jugar√© a las sombras chinescas.", type: "incorrect", feedback: "Juego, no ciencia." }
                    ],
                    [
                        { id: "A", text: "Medir√© c√≥mo cambia el tama√±o de la sombra al mover el objeto.", type: "correct", feedback: "Sencillo y efectivo." },
                        { id: "B", text: "Cuando un objeto opaco se interpone en la trayectoria de los fotones, se genera una zona de penumbra.", type: "incorrect", feedback: "Descripci√≥n del fen√≥meno, no plan experimental." },
                        { id: "C", text: "Har√© formas divertidas con las manos.", type: "incorrect", feedback: "Subjetivo ('divertidas') y sin hip√≥tesis." }
                    ],
                    [
                        { id: "A", text: "Demostrar√© que a menor distancia entre luz y objeto, mayor es la sombra proyectada.", type: "correct", feedback: "Hip√≥tesis clara lista para ser probada." },
                        { id: "B", text: "La oscuridad es la ausencia de luz.", type: "incorrect", feedback: "Definici√≥n filos√≥fica/f√≠sica." },
                        { id: "C", text: "Usar√© una linterna potente.", type: "incorrect", feedback: "Eso es un material, falta el procedimiento." }
                    ]
                ]
            },
            {
                id: 9, student: "Mayka", topic: "Reacciones Qu√≠micas", icon: "üåã",
                attempts: [
                    [
                        { id: "A", text: "Analizar√© la efervescencia producida por la liberaci√≥n de di√≥xido de carbono en una reacci√≥n √°cido-base.", type: "correct", feedback: "Cient√≠fico y preciso. Te centras en el gas y la reacci√≥n." },
                        { id: "B", text: "Con el fin de recrear un desastre natural, modelar√© la erupci√≥n del Monte Vesubio usando materiales caseros.", type: "incorrect", feedback: "Confundes un modelo de maqueta (geograf√≠a/arte) con un experimento qu√≠mico." },
                        { id: "C", text: "Voy a hacer un volc√°n que explote.", type: "incorrect", feedback: "Buscas espect√°culo, no conocimiento." }
                    ],
                    [
                        { id: "A", text: "Observar√© la neutralizaci√≥n del √°cido ac√©tico (vinagre) con bicarbonato de sodio.", type: "correct", feedback: "Uso correcto de los nombres qu√≠micos." },
                        { id: "B", text: "El vinagre es un l√≠quido miscible en agua con sabor agrio que se usa mucho en las ensaladas.", type: "incorrect", feedback: "Descripci√≥n culinaria del material." },
                        { id: "C", text: "Har√© espuma m√°gica.", type: "incorrect", feedback: "No es magia." }
                    ],
                    [
                        { id: "A", text: "La estequiometr√≠a estudia las relaciones cuantitativas entre los reactivos y productos de una reacci√≥n qu√≠mica.", type: "incorrect", feedback: "Definici√≥n de libro. No dice qu√© mezclar√°s." },
                        { id: "B", text: "Comprobar√© que la mezcla genera gas.", type: "correct", feedback: "Simple y verificable." },
                        { id: "C", text: "Saldr√° lava roja.", type: "incorrect", feedback: "Cient√≠ficamente incorrecto (no es lava, es espuma te√±ida)." }
                    ]
                ]
            }
        ];

        // --- COMPONENTES UI ---

        const Roulette = ({ students, onComplete }) => {
            const [displayIndex, setDisplayIndex] = useState(0);
            const timerRef = useRef(null);
            const startTimeRef = useRef(Date.now());
            const duration = 8000; 

            useEffect(() => {
                const animate = () => {
                    const elapsed = Date.now() - startTimeRef.current;
                    if (elapsed < duration) {
                        setDisplayIndex(prev => (prev + 1) % students.length);
                        let speed = 50; 
                        if (elapsed > duration - 2000) speed = 150; 
                        timerRef.current = setTimeout(animate, speed);
                    } else {
                        const finalIndex = Math.floor(Math.random() * students.length);
                        setDisplayIndex(finalIndex);
                        setTimeout(() => onComplete(students[finalIndex]), 1500); 
                    }
                };
                animate();
                return () => clearTimeout(timerRef.current);
            }, [students, onComplete]);

            const current = students[displayIndex];

            return (
                <div className="flex flex-col items-center justify-center min-h-screen bg-slate-900 p-8 relative overflow-hidden">
                    <div className="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-cyan-900/20 via-slate-900 to-black"></div>
                    <h2 className="text-3xl md:text-4xl text-cyan-400 font-bold mb-12 animate-pulse font-academic relative z-10">
                        Seleccionando Candidato...
                    </h2>
                    <div className="relative w-80 h-80 flex items-center justify-center z-10">
                        <div className="absolute inset-0 border-4 border-dashed border-cyan-500/30 rounded-full animate-spin-slow"></div>
                        <div className="absolute inset-4 border-2 border-slate-600 rounded-full"></div>
                        <div className="absolute inset-[-20px] border border-cyan-500/10 rounded-full animate-pulse"></div>
                        <div className="bg-slate-800/80 backdrop-blur-md text-white w-64 h-64 rounded-full flex flex-col items-center justify-center shadow-[0_0_50px_rgba(34,211,238,0.2)] border border-cyan-500/50">
                            <div className="text-7xl mb-4 animate-float">{current.icon}</div>
                            <div className="text-2xl font-bold text-center px-4 font-academic text-cyan-100">{current.student}</div>
                        </div>
                        <div className="absolute -top-10 text-cyan-400 text-4xl drop-shadow-[0_0_10px_rgba(34,211,238,0.8)]">‚ñº</div>
                    </div>
                </div>
            );
        };

        // 2. ZONA DE ENTRENAMIENTO ESTABILIZADA
        // Se ha mejorado la estructura con alturas fijas (h-full, min-h) para evitar saltos.
        const TrainingZone = ({ onComplete }) => {
            const [slide, setSlide] = useState(0);

            const slides = [
                {
                    title: "El Protocolo Inicial",
                    content: "La introducci√≥n es la br√∫jula de tu experimento. No necesitamos saber la historia de la ciencia, sino qu√© har√°s t√∫ hoy.",
                    rule: "Regla de Oro: Ve directo al grano.",
                    good: "Voy a investigar c√≥mo afecta la luz a las plantas.",
                    bad: "A m√≠ me gustan mucho las flores rojas..."
                },
                {
                    title: "1. El Tema (Contexto)",
                    content: "Ubica al lector. ¬øDe qu√© fen√≥meno hablamos? Evita definiciones de diccionario si no conectan con tu acci√≥n.",
                    rule: "Paso 1: Menciona el tema.",
                    good: "Este experimento trata sobre el magnetismo.",
                    bad: "El magnetismo es una fuerza invisible descubierta..."
                },
                {
                    title: "2. La Acci√≥n (M√©todo)",
                    content: "Usa verbos fuertes: Medir, Comparar, Observar. Evita 'Jugar', 'Ver' o 'Hacer cosas'.",
                    rule: "Paso 2: Usa verbos de acci√≥n cient√≠fica.",
                    good: "Comparar√© el crecimiento con y sin luz.",
                    bad: "Voy a poner la maceta ah√≠ a ver qu√© pasa."
                },
                {
                    title: "3. El Objetivo (Prop√≥sito)",
                    content: "Cuidado con las 'trampas cultas'. Escribir palabras dif√≠ciles no hace que un experimento sea bueno si no hay hip√≥tesis.",
                    rule: "Paso 3: Di qu√© quieres descubrir.",
                    good: "Determinar√© qu√© material es m√°s resistente.",
                    bad: "Analizar√© la estructura molecular del universo."
                }
            ];

            const nextSlide = () => {
                if (slide < slides.length - 1) setSlide(s => s + 1);
                else onComplete();
            };

            return (
                <div className="min-h-screen bg-slate-900 flex items-center justify-center p-4 md:p-8 relative">
                    <div className="absolute inset-0 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-blue-900/20 via-slate-900 to-black pointer-events-none"></div>

                    <div className="max-w-5xl w-full z-10">
                        <div className="text-center mb-8">
                            <h1 className="text-3xl md:text-4xl font-bold text-white mb-2 font-academic tracking-wide">Manual del Investigador</h1>
                            <div className="w-32 h-1 bg-gradient-to-r from-transparent via-cyan-500 to-transparent mx-auto rounded"></div>
                        </div>

                        {/* Panel con Altura Fija Estricta */}
                        <div className="glass-panel rounded-2xl p-8 md:p-12 h-[600px] flex flex-col relative border-l-4 border-l-cyan-500 transition-all duration-300">
                            
                            <div className="flex-1">
                                <div className="flex justify-between items-start mb-6">
                                    <h2 className="text-3xl font-bold text-white pb-2 font-academic border-b border-white/10 w-full">
                                        {slides[slide].title}
                                    </h2>
                                </div>

                                <p className="text-xl text-slate-300 mb-8 leading-relaxed font-light min-h-[3.5rem]">
                                    {slides[slide].content}
                                </p>

                                <div className="bg-cyan-900/30 p-4 rounded-lg border border-cyan-500/30 mb-8 inline-block">
                                    <span className="font-bold text-cyan-300 uppercase tracking-wider text-sm flex items-center gap-2">
                                        <i className="fas fa-lightbulb"></i> {slides[slide].rule}
                                    </span>
                                </div>

                                {/* Grid de Ejemplos con altura fija */}
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div className="bg-emerald-900/20 p-5 rounded-lg border border-emerald-500/20 h-32 flex flex-col justify-center">
                                        <div className="text-emerald-400 font-bold mb-1 flex items-center gap-2 text-sm uppercase">
                                            <i className="fas fa-check-circle"></i> Correcto
                                        </div>
                                        <p className="text-slate-200 text-lg italic leading-tight">"{slides[slide].good}"</p>
                                    </div>
                                    <div className="bg-rose-900/20 p-5 rounded-lg border border-rose-500/20 h-32 flex flex-col justify-center">
                                        <div className="text-rose-400 font-bold mb-1 flex items-center gap-2 text-sm uppercase">
                                            <i className="fas fa-times-circle"></i> Incorrecto
                                        </div>
                                        <p className="text-slate-400 text-lg italic leading-tight">"{slides[slide].bad}"</p>
                                    </div>
                                </div>
                            </div>

                            {/* Footer Navegaci√≥n siempre abajo */}
                            <div className="flex justify-between items-center pt-6 border-t border-white/10 mt-auto">
                                <div className="text-slate-500 text-sm font-mono">
                                    M√≥dulo {slide + 1} / {slides.length}
                                </div>
                                <button 
                                    onClick={nextSlide}
                                    className="bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-cyan-500/25 transition-all transform hover:scale-105 flex items-center gap-2"
                                >
                                    {slide === slides.length - 1 ? "Iniciar Pr√°ctica" : "Siguiente"} 
                                    <i className="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- APP PRINCIPAL ---
        function App() {
            const [gameState, setGameState] = useState('start'); 
            const [availableStudents, setAvailableStudents] = useState([...studentsDB]);
            const [currentStudent, setCurrentStudent] = useState(null);
            
            const [score, setScore] = useState(0);
            const [attemptCount, setAttemptCount] = useState(0);
            const [currentOptions, setCurrentOptions] = useState([]);
            const [selectedOption, setSelectedOption] = useState(null);
            const [feedbackState, setFeedbackState] = useState(null);

            const startRoulette = () => {
                if (availableStudents.length === 0) {
                    setGameState('victory');
                    return;
                }
                setGameState('roulette');
            };

            const handleRouletteFinish = (selected) => {
                setCurrentStudent(selected);
                setAttemptCount(0);
                setGameState('playing');
            };

            useEffect(() => {
                if (gameState === 'playing' && currentStudent) {
                    const optionsSource = currentStudent.attempts[attemptCount] || currentStudent.attempts[currentStudent.attempts.length - 1];
                    const shuffled = [...optionsSource].sort(() => Math.random() - 0.5);
                    setCurrentOptions(shuffled);
                    setSelectedOption(null);
                    setFeedbackState(null);
                }
            }, [gameState, currentStudent, attemptCount]);

            const handleOptionSelect = (option) => {
                if (feedbackState) return;
                setSelectedOption(option);
                
                if (option.type === 'correct') {
                    setFeedbackState('correct');
                    if (attemptCount === 0) setScore(s => s + 1);
                } else {
                    setFeedbackState('incorrect');
                }
            };

            const handleNextAction = () => {
                if (feedbackState === 'correct') {
                    const remaining = availableStudents.filter(s => s.id !== currentStudent.id);
                    setAvailableStudents(remaining);
                    
                    if (remaining.length === 0) {
                        setGameState('victory');
                    } else {
                        startRoulette();
                    }
                } else {
                    if (attemptCount < 2) {
                        setAttemptCount(prev => prev + 1);
                    } else {
                         const remaining = availableStudents.filter(s => s.id !== currentStudent.id);
                        setAvailableStudents(remaining);
                        if (remaining.length === 0) setGameState('victory');
                        else startRoulette();
                    }
                }
            };

            // VISTAS
            if (gameState === 'start') {
                return (
                    <div className="min-h-screen flex flex-col items-center justify-center p-8 bg-slate-900 relative overflow-hidden">
                         <div className="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-cyan-900/20 via-slate-900 to-black"></div>
                        
                        <div className="z-10 text-center glass-panel p-16 rounded-[3rem] shadow-2xl animate-fadeIn border border-white/5 max-w-3xl">
                            <div className="text-8xl mb-6 animate-float inline-block">üß¨</div>
                            <h1 className="text-5xl md:text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 mb-6 font-academic">
                                Desaf√≠o Cient√≠fico
                            </h1>
                            <p className="text-slate-300 text-xl font-light mb-10 leading-relaxed">
                                Tu misi√≥n es validar los reportes de laboratorio. <br/>
                                Ayuda a tus compa√±eros a encontrar la introducci√≥n perfecta.
                            </p>
                            <button onClick={() => setGameState('learning')} 
                                className="bg-cyan-600 hover:bg-cyan-500 text-white text-xl font-bold py-5 px-12 rounded-2xl shadow-[0_0_30px_rgba(8,145,178,0.4)] transition-all transform hover:scale-105">
                                Iniciar Protocolo
                            </button>
                        </div>
                    </div>
                );
            }

            if (gameState === 'learning') {
                return <TrainingZone onComplete={() => startRoulette()} />;
            }

            if (gameState === 'roulette') {
                return <Roulette students={availableStudents} onComplete={handleRouletteFinish} />;
            }

            if (gameState === 'victory') {
                return (
                    <div className="min-h-screen bg-slate-900 flex flex-col items-center justify-center p-4 relative overflow-hidden">
                        <div className="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-emerald-900/40 via-slate-900 to-black"></div>
                        <div className="text-9xl mb-6 animate-bounce z-10">üèÜ</div>
                        <h1 className="text-5xl font-bold text-white mb-4 z-10 font-academic">¬°Evaluaci√≥n Completada!</h1>
                        <p className="text-slate-300 text-2xl mb-8 z-10">Has ayudado a todo el equipo de laboratorio.</p>
                        <button onClick={() => window.location.reload()} className="z-10 bg-white text-slate-900 font-bold py-4 px-10 rounded-full hover:bg-cyan-50 transition shadow-xl hover:scale-105">
                            Reiniciar Sistema
                        </button>
                    </div>
                );
            }

            // VISTA DE JUEGO PRINCIPAL
            return (
                <div className="h-screen w-screen bg-slate-950 text-white flex flex-col md:flex-row overflow-hidden relative">
                    
                    {/* Panel Izquierdo */}
                    <div className="w-full md:w-[350px] bg-slate-900 border-r border-slate-800 p-6 flex flex-col relative z-20 shadow-2xl">
                        <div className="mb-8 flex justify-between items-center">
                            <div className="flex items-center gap-2 text-cyan-500 font-mono text-xs uppercase tracking-widest">
                                <span className="w-2 h-2 bg-cyan-500 rounded-full animate-pulse"></span>
                                <span>En Vivo</span>
                            </div>
                        </div>

                        <div className="flex-1 flex flex-col items-center text-center space-y-6 animate-fadeIn">
                             <div className="relative group">
                                <div className="absolute inset-0 bg-cyan-500/20 blur-xl rounded-full"></div>
                                <div className="w-32 h-32 rounded-full bg-slate-800 flex items-center justify-center text-6xl border-4 border-slate-700 shadow-xl relative z-10">
                                    {currentStudent.icon}
                                </div>
                            </div>
                            
                            <div className="w-full bg-slate-800/50 p-5 rounded-xl border border-slate-700/50 backdrop-blur-sm">
                                <h3 className="text-[10px] uppercase tracking-widest text-slate-500 mb-1 font-bold">Estudiante</h3>
                                <div className="text-2xl font-bold text-white font-academic mb-4">{currentStudent.student}</div>
                                <div className="h-px bg-slate-700 w-full mb-4"></div>
                                <h3 className="text-[10px] uppercase tracking-widest text-slate-500 mb-1 font-bold">Tema</h3>
                                <div className="text-lg text-cyan-400">{currentStudent.topic}</div>
                            </div>

                            <div className="w-full mt-auto bg-black/20 p-4 rounded-xl border border-slate-800">
                                <div className="flex justify-between text-[10px] text-slate-400 mb-2 uppercase tracking-wider font-bold">
                                    <span>Intentos Restantes</span>
                                    <span>{3 - attemptCount}</span>
                                </div>
                                <div className="flex gap-2 h-2">
                                    {[0, 1, 2].map(i => (
                                        <div key={i} className={`flex-1 rounded-full transition-all duration-500 ${i < (3 - attemptCount) ? 'bg-cyan-500 shadow-[0_0_10px_rgba(6,182,212,0.5)]' : 'bg-slate-800'}`}></div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Panel Derecho */}
                    <div className="flex-1 bg-slate-950 relative flex flex-col p-6 md:p-12 overflow-y-auto custom-scrollbar">
                        <div className="absolute inset-0 opacity-[0.03] pointer-events-none" style={{backgroundImage: 'linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)', backgroundSize: '50px 50px'}}></div>

                        <div className="max-w-4xl mx-auto w-full relative z-10 space-y-8 pb-24">
                            <div className="mb-4 animate-fadeIn">
                                <h2 className="text-3xl font-light text-white leading-tight font-academic">
                                    Selecciona la <span className="font-bold text-cyan-400">mejor introducci√≥n</span>
                                </h2>
                            </div>

                            <div className="space-y-4">
                                {currentOptions.map((option, idx) => {
                                    const isSelected = selectedOption?.id === option.id;
                                    const isCorrect = option.type === 'correct';
                                    
                                    let containerClass = "border-slate-800 bg-slate-900/60 hover:bg-slate-800 hover:border-cyan-500/50";
                                    let iconClass = "bg-slate-800 text-slate-500 border-slate-700";
                                    
                                    if (feedbackState) {
                                        if (isSelected) {
                                            if (isCorrect) {
                                                containerClass = "border-emerald-500 bg-emerald-900/20 shadow-[0_0_30px_rgba(16,185,129,0.1)]";
                                                iconClass = "bg-emerald-500 text-white border-emerald-500";
                                            } else {
                                                containerClass = "border-rose-500 bg-rose-900/20";
                                                iconClass = "bg-rose-500 text-white border-rose-500";
                                            }
                                        } else {
                                            containerClass = "opacity-40 border-transparent bg-slate-900/20 grayscale pointer-events-none";
                                        }
                                    }

                                    return (
                                        <button 
                                            key={idx}
                                            onClick={() => handleOptionSelect(option)}
                                            disabled={!!feedbackState}
                                            className={`w-full text-left p-6 md:p-8 rounded-2xl border transition-all duration-300 group relative overflow-hidden gpu-accelerated ${containerClass} ${!feedbackState ? 'hover:scale-[1.01]' : ''}`}
                                        >
                                            <div className="flex items-start gap-6 relative z-10">
                                                <div className={`w-10 h-10 rounded-lg flex items-center justify-center font-bold text-lg border transition-colors shrink-0 ${iconClass}`}>
                                                    {String.fromCharCode(65 + idx)}
                                                </div>
                                                <div className="flex-1">
                                                    <p className={`text-lg leading-relaxed transition-colors ${feedbackState && isSelected ? 'text-white' : 'text-slate-300 group-hover:text-white'}`}>
                                                        {option.text}
                                                    </p>
                                                    
                                                    {feedbackState && isSelected && (
                                                        <div className="mt-4 pt-4 border-t border-white/10 animate-fadeIn">
                                                            <div className={`text-sm font-bold mb-1 flex items-center gap-2 ${isCorrect ? 'text-emerald-400' : 'text-rose-400'}`}>
                                                                <i className={`fas ${isCorrect ? 'fa-check-circle' : 'fa-times-circle'}`}></i>
                                                                {isCorrect ? 'AN√ÅLISIS CORRECTO' : 'REVISAR CONCEPTO'}
                                                            </div>
                                                            <div className="text-slate-300 text-base font-light italic">
                                                                "{option.feedback}"
                                                            </div>
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                        </button>
                                    );
                                })}
                            </div>
                        </div>

                        <div className={`fixed bottom-0 right-0 left-0 md:left-[350px] p-6 bg-gradient-to-t from-slate-950 to-transparent pointer-events-none flex justify-center md:justify-end items-end transition-opacity duration-300 ${feedbackState ? 'opacity-100' : 'opacity-0'}`}>
                            {feedbackState && (
                                <button 
                                    onClick={handleNextAction}
                                    className={`pointer-events-auto px-8 py-4 rounded-xl font-bold text-lg shadow-2xl transition-all duration-300 hover:scale-105 flex items-center gap-3 mb-4 mr-4 ${
                                        feedbackState === 'correct' 
                                        ? 'bg-emerald-600 hover:bg-emerald-500 text-white shadow-emerald-500/40 ring-4 ring-emerald-500/20' 
                                        : 'bg-cyan-600 hover:bg-cyan-500 text-white shadow-cyan-500/40 ring-4 ring-cyan-500/20'
                                    }`}
                                >
                                    <span>
                                        {feedbackState === 'correct' ? 'Siguiente Estudiante' : (attemptCount < 2 ? 'Intentar otra variante' : 'Siguiente Estudiante')}
                                    </span>
                                    <i className={`fas ${feedbackState === 'correct' ? 'fa-arrow-right' : 'fa-sync-alt'}`}></i>
                                </button>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>